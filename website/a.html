<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>공항 NFT 처방전 검증 (Web — min(55vw, 1200px))</title>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/html-to-image/1.11.13/html-to-image.min.js" integrity="sha512-iZ2ORl595Wx6miw+GuadDet4WQbdSWS3JLMoNfY8cRGoEFy6oT3G9IbcrBeL6AfkgpA51ETt/faX6yLV+/gFJg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

  <style>
    /* ───────────────────────────────────────────────────────────────
       웹(데스크톱) 규격 고정: width: min(55vw, 1200px)
       - 원본 배치(버튼 → 안내문 → 기능 4열) 그대로 유지
       - 높이는 콘텐츠에 맞춰 자동 확장
       ─────────────────────────────────────────────────────────────── */

    :root {
      --app-width: 1200px;
      --content-padding-x: 24px;
      --content-padding-y: 20px;

      --brand1: #667eea;
      --brand2: #764ba2;
      --ink: #1f2937;      /* slate-800 */
      --muted: #6b7280;    /* gray-500 */
      --surface: #ffffff;
      --card: #f8fafc;
      --ok: #10b981;
      --warn: #f59e0b;
      --line: #e5e7eb;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, var(--brand1) 0%, var(--brand2) 100%);
      min-height: 100vh; display: flex; align-items: flex-start; justify-content: center;
      -webkit-user-select: none; user-select: none; color: var(--ink);
      padding: 0;
    }

    /* 고정 폭 컨테이너 */
    .container {
      width: var(--app-width);
      background: var(--surface);
      border-radius: 16px;
      box-shadow: 0 14px 48px rgba(0,0,0,0.18);
      overflow: hidden;
      display: flex; flex-direction: column;
    }

    /* 헤더 (원본과 동일하게 중앙 정렬, 자동 높이) */
    .header {
      background: linear-gradient(135deg, var(--brand1) 0%, var(--brand2) 100%);
      color: #fff;
      padding: 18px 20px;
      display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 6px;
    }
    .logo {
      width: 72px; height: 72px; border-radius: 16px; background: rgba(255,255,255,0.25);
      display: flex; align-items: center; justify-content: center; position: relative; margin-bottom: 6px;
    }
    .logo::before { content: ''; width: 28px; height: 28px; border: 4px solid #fff; border-radius: 6px; }
    .logo::after  { content: ''; position: absolute; width: 18px; height: 3px; background: #fff; top: 50%; left: 50%; transform: translate(-50%, -50%); border-radius: 2px; }
    .header-title   { font-size: 28px; font-weight: 800; letter-spacing: .2px; }
    .header-subtitle{ font-size: 14px; opacity: .95; }

    /* 본문: 원본처럼 세로 스택 배치 */
    .main-content {
      padding: var(--content-padding-y) var(--content-padding-x) 28px;
      background: var(--surface);
    }

    /* 공통 스크린 */
    .screen { display: none; width: 100%; }
    .screen.active { display: block; }

    /* 초기 화면 — 버튼 → 안내문 → 기능 4열 */
    .initial-screen { text-align: center; }

    .scan-btn {
      width: 520px; height: 72px; max-width: 100%;
      border: none; border-radius: 18px;
      background: linear-gradient(135deg, var(--brand1) 0%, var(--brand2) 100%);
      color: #fff; font-size: 20px; font-weight: 800; letter-spacing: .2px;
      cursor: pointer; box-shadow: 0 12px 28px rgba(102,126,234,.35);
      transition: transform .12s ease, box-shadow .12s ease;
      margin: 0 auto 20px; display: block;
    }
    .scan-btn:active { transform: translateY(-2px); box-shadow: 0 16px 36px rgba(102,126,234,.45); }

    .instruction-text { font-size: 16px; color: var(--muted); line-height: 1.6; max-width: 900px; margin: 0 auto 24px; }

    .features {
      display: grid;
      grid-template-columns: repeat(4, 1fr); /* 원본 4열 유지 */
      gap: 24px;
      width: 100%;
      max-width: 1152px; /* 내부 카드 폭 제어(= 4 × 288px) */
      margin: 0 auto;
    }
    .feature {
      background: #f1f5f9; border-left: 6px solid var(--brand1);
      border-radius: 16px; padding: 22px 18px; min-height: 120px; text-align: left;
      box-shadow: inset 0 0 0 1px rgba(0,0,0,0.02);
    }
    .feature-icon { width: 44px; height: 44px; border-radius: 12px; background: #64748b; margin-bottom: 10px; position: relative; }
    .feature-icon.speed::before   { content:''; position:absolute; width:18px; height:18px; border:2px solid #fff; border-top-color:transparent; border-right-color:transparent; border-radius:50%; top:12px; left:12px; transform: rotate(-45deg); }
    .feature-icon.security::before{ content:''; position:absolute; width:16px; height:20px; border:2px solid #fff; border-radius:4px; top:10px; left:14px; }
    .feature-icon.security::after { content:''; position:absolute; width:10px; height:8px; border:2px solid #fff; border-bottom:none; border-radius:4px 4px 0 0; top:6px; left:17px; }
    .feature-icon.global::before  { content:''; position:absolute; width:26px; height:26px; border:2px solid #fff; border-radius:50%; top:9px; left:9px; }
    .feature-icon.global::after   { content:''; position:absolute; width:22px; height:2px; background:#fff; top:21px; left:11px; }
    .feature-icon.medical::before { content:''; position:absolute; width:22px; height:22px; background:#fff; border-radius:4px; top:11px; left:11px; }
    .feature-icon.medical::after  { content:''; position:absolute; width:14px; height:2px; background:#64748b; top:22px; left:15px; border-radius:1px; }
    .feature-title { font-size: 18px; font-weight: 800; color: var(--ink); margin-bottom: 6px; }
    .feature-desc  { font-size: 14px; color: var(--muted); }

    /* 인증 방법 선택 (2장 카드 중앙 정렬) */
    .method-title   { font-size: 28px; font-weight: 900; margin-bottom: 6px; text-align: center; }
    .method-subtitle{ font-size: 14px; color: var(--muted); text-align: center; margin-bottom: 18px; }

    .method-buttons { display: flex; gap: 32px; justify-content: center; margin: 0 auto 16px; }
    .method-btn {
      width: 360px; min-height: 220px; padding: 22px; border-radius: 18px; background: #fff; border: 3px solid #e2e8f0; cursor: pointer; transition: transform .12s ease, border-color .12s ease, box-shadow .12s ease; text-align: center;
    }
    .method-btn:active { transform: translateY(-3px); border-color: var(--brand1); box-shadow: 0 18px 32px rgba(102,126,234,.25); }

    .method-icon { width: 84px; height: 84px; border-radius: 16px; background: #64748b; margin: 0 auto 12px; position: relative; }
    .method-icon.qr::before { content:''; position:absolute; width:44px; height:44px; border:5px solid #fff; border-radius:10px; top:20px; left:20px; }
    .method-icon.qr::after  { content:''; position:absolute; width:24px; height:24px; background:#fff; border-radius:4px; top:30px; left:30px; }
    .method-icon.nfc::before{ content:''; position:absolute; width:46px; height:46px; border:5px solid #fff; border-radius:50%; border-top-color:transparent; border-right-color:transparent; top:19px; left:19px; }
    .method-icon.nfc::after { content:''; position:absolute; width:28px; height:28px; border:4px solid #fff; border-radius:50%; border-top-color:transparent; border-right-color:transparent; top:28px; left:28px; }

    .method-name { font-size: 20px; font-weight: 800; margin-bottom: 6px; }
    .method-desc { font-size: 14px; color: var(--muted); }

    .actions-row { display: flex; gap: 14px; justify-content: center; margin-top: 12px; }
    .btn { width: 240px; height: 52px; border: none; border-radius: 12px; font-size: 16px; font-weight: 800; cursor: pointer; }
    .btn-back { background: #64748b; color: #fff; }
    .btn-back:active { background: #475569; }
    .btn-new { background: linear-gradient(135deg, var(--brand1) 0%, var(--brand2) 100%); color:#fff; }
    .btn-simulate { background: var(--warn); color: #fff; }

    /* NFC 화면 */
    .nfc-screen { text-align: center; }
    .nfc-animation {
      width: 220px; height: 220px; margin: 12px auto 16px; border-radius: 50%;
      background: linear-gradient(135deg, var(--brand1) 0%, var(--brand2) 100%);
      display:flex; align-items:center; justify-content:center; position: relative;
      box-shadow: 0 0 30px rgba(102,126,234,0.55);
      animation: nfc-pulse 3s infinite ease-in-out;
    }
    .nfc-animation::before { content:''; width:60px; height:60px; border:5px solid #fff; border-radius:50%; border-top-color:transparent; border-right-color:transparent; }
    .nfc-animation::after  { content:''; position:absolute; width:280px; height:280px; border:3px solid rgba(102,126,234,.28); border-radius:50%; animation: nfc-ring 3s infinite ease-out; }
    @keyframes nfc-pulse { 0%,100%{ transform: scale(1);} 50%{ transform: scale(1.05);} }
    @keyframes nfc-ring  { 0%{ transform: scale(.72); opacity:1;} 100%{ transform: scale(1.28); opacity:0;} }

    .nfc-status { font-size: 22px; font-weight: 900; color: var(--ink); margin-bottom: 8px; }
    .nfc-instruction { font-size: 14px; color: var(--muted); line-height: 1.6; margin-bottom: 10px; }

    /* 결과 화면 */
    .result-screen { text-align: center; }
    .result-icon { width: 150px; height: 150px; border-radius: 50%; margin: 12px auto 12px; color: #fff; display:flex; align-items:center; justify-content:center; position:relative; }
    .result-icon.success { background: linear-gradient(135deg, #10b981 0%, #059669 100%); box-shadow: 0 0 32px rgba(16,185,129,.45); }
    .result-icon.success::before { content:''; width: 44px; height: 24px; border-left: 5px solid #fff; border-bottom: 5px solid #fff; transform: rotate(-45deg); border-radius: 0 0 0 5px; }

    .result-title { font-size: 26px; font-weight: 900; color: var(--ok); margin-bottom: 6px; }
    .result-subtitle { font-size: 14px; color: var(--muted); margin-bottom: 12px; }

    .result-message { background: #f0fdf4; border-left: 6px solid var(--ok); border-radius: 14px; padding: 16px; margin: 10px auto 14px; width: calc(100% - 2*var(--content-padding-x)); text-align: left; }
    .message-korean  { font-size: 18px; font-weight: 900; color: #059669; }
    .message-english { font-size: 14px; font-style: italic; color: var(--ok); }

    .prescription-details {
      width: calc(100% - 2*var(--content-padding-x));
      background: var(--card); border-radius: 16px; padding: 18px; margin: 10px auto 14px; box-shadow: 0 2px 12px rgba(0,0,0,0.06);
      text-align: left;
    }
    .detail-row { display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-bottom: 2px solid var(--line); }
    .detail-row:last-child { border-bottom: none; }
    .detail-label { font-size: 14px; color: var(--muted); font-weight: 700; }
    .detail-value { font-size: 14px; color: var(--ink); font-weight: 800; }

    .medication-list { width: calc(100% - 2*var(--content-padding-x)); margin: 8px auto 12px; text-align: left; }
    .medication-title { font-size: 18px; font-weight: 900; color: var(--ink); margin-bottom: 8px; }

    .medication-item { border: 1px solid var(--line); border-left: 6px solid #1e7be2; background: #f5faff; border-radius: 12px; padding: 14px; margin: 10px 0; box-shadow: 0 2px 8px rgba(0,0,0,0.04); font-size: 14px; line-height: 1.6; }
    .medication-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px; }
    .medication-name { font-weight: 900; color: #1a237e; font-size: 16px; }
    .medication-status { font-size: 12px; font-weight: 900; padding: 4px 10px; border-radius: 8px; color: #fff; }
    .medication-status.approved { background: #4caf50; }
    .medication-status.special  { background: var(--warn); }
    .medication-details { color: #374151; display: flex; flex-direction: column; gap: 4px; margin-bottom: 4px; }
    .medication-generic, .medication-usage { font-size: 14px; }
    .medication-note { font-size: 13px; color: #4b5563; }
    .medication-note.special { color: #d97706; font-weight: 800; }
  </style>
</head>

<body id="artifacts-component-root-html">
  <div class="container">
    <!-- Header -->
    <div class="header">
      <div class="logo"></div>
      <div class="header-title">K-Health Ticket</div>
      <div class="header-subtitle">Airport Medication Verification System</div>
    </div>

    <!-- Content -->
    <div class="main-content">
      <!-- 초기 화면 (원본 배치) -->
      <div class="screen initial-screen active" id="initialScreen">
        <button class="scan-btn" id="startScanBtn">NFT 처방전 검증</button>
        <p class="instruction-text">NFT 처방전의 QR 코드를 스캔하거나 NFC를 태그하여 의약품 반입 허용 여부를 즉시 확인하세요.</p>

        <div class="features">
          <div class="feature">
            <div class="feature-icon speed"></div>
            <div class="feature-title">즉시 검증</div>
            <div class="feature-desc">3초 이내 진위 판별</div>
          </div>
          <div class="feature">
            <div class="feature-icon security"></div>
            <div class="feature-title">블록체인 보안</div>
            <div class="feature-desc">위변조 불가능한 인증</div>
          </div>
          <div class="feature">
            <div class="feature-icon global"></div>
            <div class="feature-title">국제 표준</div>
            <div class="feature-desc">IATA 규정 자동 확인</div>
          </div>
          <div class="feature">
            <div class="feature-icon medical"></div>
            <div class="feature-title">의료진 인증</div>
            <div class="feature-desc">실시간 병원 검증</div>
          </div>
        </div>
      </div>

      <!-- 인증 방법 선택 화면 -->
      <div class="screen method-screen" id="methodScreen">
        <div class="method-title">인증 방법 선택</div>
        <div class="method-subtitle">Choose Authentication Method</div>

        <div class="method-buttons">
          <div class="method-btn" id="qrBtn">
            <div class="method-icon qr"></div>
            <div class="method-name">QR 스캔</div>
            <div class="method-desc">QR Code Scan</div>
          </div>
          <div class="method-btn" id="nfcBtn">
            <div class="method-icon nfc"></div>
            <div class="method-name">NFC 태그</div>
            <div class="method-desc">NFC Tag Reading</div>
          </div>
        </div>

        <div class="actions-row">
          <button class="btn btn-back" id="backToInitial">← 뒤로가기</button>
        </div>
      </div>

      <!-- NFC 검증 화면 -->
      <div class="screen nfc-screen" id="nfcScreen">
        <div class="nfc-animation"></div>
        <div class="nfc-status" id="nfcStatus">NFC 대기 중...</div>
        <div class="nfc-instruction">NFT 처방전이 포함된 기기를 리더기에 가까이 대어주세요<br/><em>Please bring your NFT prescription device close to the reader</em></div>

        <div class="actions-row">
          <button class="btn btn-back" id="backToMethod">← 뒤로가기</button>
          <button class="btn btn-simulate" id="simulateNfc">검증</button>
        </div>
      </div>

      <!-- 검증 결과 화면 -->
      <div class="screen result-screen" id="resultScreen">
        <div class="result-icon success" id="resultIcon"></div>
        <div class="result-title success" id="resultTitle">검증 성공</div>
        <div class="result-subtitle" id="resultSubtitle">Verification Successful</div>

        <div class="result-message success" id="resultMessage">
          <div class="message-korean success">해당 처방전은 유효합니다</div>
          <div class="message-english success">This prescription is valid and authentic</div>
        </div>

        <div class="prescription-details" id="prescriptionDetails">
          <div class="detail-row"><span class="detail-label">환자명 (Patient):</span><span class="detail-value">김환자 (Kim, Patient)</span></div>
          <div class="detail-row"><span class="detail-label">발행 병원 (Hospital):</span><span class="detail-value">서울대학교병원</span></div>
          <div class="detail-row"><span class="detail-label">담당 의사 (Doctor):</span><span class="detail-value">김진성</span></div>
          <div class="detail-row"><span class="detail-label">처방일 (Prescription Date):</span><span class="detail-value">2025.08.07</span></div>
          <div class="detail-row"><span class="detail-label">반입 상태 (Import Status):</span><span class="detail-value" style="color: var(--ok); font-weight: 900;">승인 (APPROVED)</span></div>
        </div>

        <div class="medication-list" id="medicationList">
          <div class="medication-title">처방 약물 목록 (Prescribed Medications)</div>

          <div class="medication-item">
            <div class="medication-header"><span class="medication-name">타이레놀 정 500mg</span><span class="medication-status approved">승인</span></div>
            <div class="medication-details"><span class="medication-generic">Acetaminophen 500mg</span><span class="medication-usage">1일 3회, 1회 1정</span></div>
            <div class="medication-note">해열진통제 - 기내 반입 허용</div>
          </div>

          <div class="medication-item">
            <div class="medication-header"><span class="medication-name">오메프라졸 캡슐 20mg</span><span class="medication-status approved">승인</span></div>
            <div class="medication-details"><span class="medication-generic">Omeprazole 20mg</span><span class="medication-usage">1일 1회, 식전 복용</span></div>
            <div class="medication-note">위산분비억제제 - 기내 반입 허용</div>
          </div>

          <div class="medication-item">
            <div class="medication-header"><span class="medication-name">로라제팜 정 0.5mg</span><span class="medication-status approved">승인</span></div>
            <div class="medication-details"><span class="medication-generic">Lorazepam 0.5mg</span><span class="medication-usage">필요시 복용, 1일 최대 2정</span></div>
            <div class="medication-note">불안장애 치료제 - 처방전 확인 후 기내 반입 허용</div>
          </div>

          <div class="medication-item insulin">
            <div class="medication-header"><span class="medication-name">휴물린 N 인슐린 주사</span><span class="medication-status special">특별허가</span></div>
            <div class="medication-details"><span class="medication-generic">Humulin N Insulin Injection</span><span class="medication-usage">1일 2회 피하주사</span></div>
            <div class="medication-note special">당뇨병 치료제 - 냉장보관 필요, 의료진 확인 후 기내 반입 허용</div>
          </div>
        </div>

        <div class="actions-row"><button class="btn btn-new" id="newVerificationBtn">새로운 검증</button></div>
      </div>
    </div>
  </div>

  <!-- JS (동작 동일) -->
  <script>
    function showScreen(screenId) {
      document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
      const target = document.getElementById(screenId);
      if (target) target.classList.add('active');
    }

    function showVerificationResult() { showScreen('resultScreen'); }

    function simulateNfcVerification() {
      const nfcStatus = document.getElementById('nfcStatus');
      const simulateBtn = document.getElementById('simulateNfc');
      simulateBtn.disabled = true; simulateBtn.textContent = '검증 중...';
      nfcStatus.textContent = 'NFT 태그 감지됨...';
      setTimeout(() => { nfcStatus.textContent = '블록체인 검증 중...'; }, 900);
      setTimeout(() => { nfcStatus.textContent = '의료진 인증 확인 중...'; }, 1800);
      setTimeout(() => {
        nfcStatus.textContent = '검증 완료!';
        setTimeout(() => { showVerificationResult(); simulateBtn.disabled = false; simulateBtn.textContent = '검증'; nfcStatus.textContent = 'NFC 대기 중...'; }, 500);
      }, 2600);
    }

    document.addEventListener('DOMContentLoaded', () => {
      const startBtn = document.getElementById('startScanBtn');
      if (startBtn) startBtn.addEventListener('click', () => showScreen('methodScreen'));

      const qrBtn = document.getElementById('qrBtn');
      if (qrBtn) qrBtn.addEventListener('click', () => { alert('QR 스캔 모드를 시작합니다.'); setTimeout(showVerificationResult, 1300); });

      const nfcBtn = document.getElementById('nfcBtn');
      if (nfcBtn) nfcBtn.addEventListener('click', () => { showScreen('nfcScreen'); setTimeout(simulateNfcVerification, 900); });

      const simulateBtn = document.getElementById('simulateNfc');
      if (simulateBtn) simulateBtn.addEventListener('click', simulateNfcVerification);

      const backToInitial = document.getElementById('backToInitial');
      if (backToInitial) backToInitial.addEventListener('click', () => showScreen('initialScreen'));

      const backToMethod = document.getElementById('backToMethod');
      if (backToMethod) backToMethod.addEventListener('click', () => showScreen('methodScreen'));

      const newVerificationBtn = document.getElementById('newVerificationBtn');
      if (newVerificationBtn) newVerificationBtn.addEventListener('click', () => showScreen('initialScreen'));
    });
  </script>
</body>
</html>
