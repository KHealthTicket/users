<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>K-Health Ticket - 블록체인 기반 디지털 진단서</title>
<style>
  /* ====== Design Baseline ======
     - 기준 캔버스(디자인) 사이즈: 1440 x 900 (16:10)
     - 섹션별 프레임도 동일 비율로 구성해 "같은 화면 비율" 유지
  */
  :root{
    --design-w: 1440;
    --design-h: 900;
    --scale: 1;                  /* JS가 계산해서 갱신 */
    --header-h: 80;              /* 디자인 기준 헤더 높이(px) */
    --gap: 24;                   /* 디자인 기준 기본 간격 */
  }

  /* Reset */
  *,*::before,*::after{ box-sizing: border-box; }
  html,body{ height: 100%; }
  body{
    margin: 0;
    background: #fff;
    color:#2c3e50;
    font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;
    overflow-x: hidden;
  }
  img{ display:block; max-width:100%; height:auto; }

  /* ====== Header (Scaled) ======
     - 헤더도 비율 유지하도록 높이/패딩을 scale 기반으로 계산
  */
  header{
    position: fixed;
    inset: 0 0 auto 0;
    height: calc(var(--header-h) * 1px * var(--scale));
    background: rgba(255,255,255,0.95);
    backdrop-filter: blur(10px);
    border-bottom: 1px solid rgba(0,0,0,0.06);
    z-index:1000;
  }
  .header-inner{
    max-width: calc(var(--design-w) * 1px * var(--scale));
    margin: 0 auto;
    height: 100%;
    display:flex; align-items:center; justify-content:space-between;
    padding: 0 calc(32px * var(--scale));
  }
  .brand{
    display:flex; align-items:center; gap: calc(12px * var(--scale));
    font-weight: 800;
    font-size: calc(22px * var(--scale));
    color:#4A90E2;
    opacity:0; transform: scale(0.9);
    animation: brandIn .7s ease-out .1s forwards;
  }
  @keyframes brandIn{ to{ opacity:1; transform: scale(1);} }
  .brand img{
    width: calc(35px * var(--scale));
    filter: drop-shadow(0 4px 6px rgba(66,188,147,.3));
    animation: pulseLogo 2s ease-in-out infinite;
  }
  @keyframes pulseLogo{ 0%{transform:scale(1)} 50%{transform:scale(1.1)} 100%{transform:scale(1)} }

  nav ul{ list-style:none; padding:0; margin:0; display:flex; gap: calc(24px * var(--scale)); }
  nav a{
    font-size: calc(14px * var(--scale));
    text-decoration:none; color:#2c3e50; font-weight:600;
    padding: calc(8px * var(--scale)) calc(12px * var(--scale));
    border-radius: calc(8px * var(--scale));
    transition: background .2s ease, color .2s ease;
  }
  nav a:hover{ color:#4A90E2; background: rgba(74,144,226,.12); }

  /* ====== Stage & Section Frames ======
     - 각 섹션을 "프레임"으로 감싸고 그 안에서 절대좌표 + % 레이아웃
     - 프레임은 aspect-ratio로 비율 고정, width는 100vw(또는 컨테이너 폭)에 맞춤
  */
  .section{
    padding-top: calc(var(--header-h) * 1px * var(--scale)); /* 헤더만큼 내려 시작 */
    position: relative;
  }

  /* 공통 프레임: 16:10 비율 고정 */
  .frame{
    width: 100vw;
    max-width: calc(var(--design-w) * 1px); /* 데스크톱에서 더 커지지 않게 */
    aspect-ratio: 16 / 10;
    margin: 0 auto;
    position: relative;
    /* 프레임 테두리 확인용 (필요시 주석)
    outline: 1px dashed rgba(0,0,0,.08); */
  }
  /* 프레임 내부 컨텐츠는 디자인 픽셀 좌표계를 그대로 쓰되 scale로 축소 */
  .frame-inner{
    position: absolute; inset: 0;
    width: calc(var(--design-w) * 1px);
    height: calc(var(--design-h) * 1px);
    transform-origin: top left;
    transform: scale(var(--scale));
    overflow: hidden;
  }

  /* ====== Hello (Hero) ====== */
  .hello{
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  }
  /* 디자인 기준 좌표: 텍스트 블록 */
  .hello .title{
    position:absolute; left: 120px; top: 180px; width: 520px;
  }
  .hello .title h1{
    font-size: 48px; line-height:1.15; color:#fff; margin:0 0 12px 0;
    opacity:0; transform: translateY(24px);
    animation: fadeUp 0.8s ease-out .2s forwards;
  }
  .hello .title .subtitle{
    font-size: 16px; color:#e2ecf5cc;
  }
  @keyframes fadeUp{ to{ opacity:1; transform: translateY(0);} }

  /* 오른쪽 공항 로고 이미지 */
  .hello .airport{
    position:absolute; right: 110px; top: 150px; width: 600px; height: 400px;
    display:flex; align-items:center; justify-content:center;
  }
  .hello .airport img{
    max-width: 100%; max-height: 100%; object-fit: contain;
    opacity:.3; animation: fadePulse 2.6s ease-in-out infinite;
  }
  @keyframes fadePulse{ 0%,100%{opacity:.3} 50%{opacity:1} }

  /* ====== NFT Flow ====== */
  .flow{
    background: #fff;
  }
  .flow .title{
    position:absolute; left: 0; right:0; top: 80px; text-align:center;
    font-size: 36px; font-weight: 800; color:#2c3e50;
    opacity:0; transform: translateY(24px);
    transition: .6s ease;
  }
  .flow .title.show{ opacity:1; transform: translateY(0); }
  .flow .title h6{ margin: 6px 0 0; font-size:16px; color:#6c7a89; }

  /* NFT 절차 박스 위치/비율 고정 (디자인 기준) */
  .flow .flow-box{
    position:absolute; left: 120px; right: 120px; top: 200px; height: 120px;
    display:grid; grid-auto-flow: column; grid-auto-columns: 1fr min-content;
    align-items:center; gap: 28px; padding: 14px; background:#ffffff;
    border-radius: 16px; box-shadow: 0 10px 28px rgba(0,0,0,.08);
  }
  .flow .step{
    display:flex; align-items:center; justify-content:center;
    height: 64px; padding: 14px 22px; border-radius: 12px; background:#fff;
    box-shadow: 0 6px 20px rgba(0,0,0,.06);
    font: 700 16px/1.25 -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;
    letter-spacing:.2px;
  }
  .flow .arrow{
    width: 28px; height: 28px; display:inline-flex; align-items:center; justify-content:center;
    border-radius: 10px; background:#eef6ff; user-select:none;
  }
  /* 진입 애니메이션 */
  .flow.animate .flow-box > *{ transform: translateX(50px); transition: transform .8s ease; }
  .flow.animate-back .flow-box > *{ transform: translateX(0); }

  /* ====== Simulation ====== */
  .simul{
    background: linear-gradient(135deg, #667eead0 0%, #764ba2cf 100%);
  }
  /* 데스크톱 카드(16:10)는 프레임 왼쪽에 고정 배치 */
  .simul .desktop{
    position:absolute; left: 80px; top: 120px; width: 880px; height: 550px;
    border-radius: 20px; box-shadow: 0 20px 60px rgba(0,0,0,.2); overflow:hidden;
    background: linear-gradient(180deg, rgba(33,31,31,.53), rgba(26,13,13,.34));
  }
  .simul .window{
    position:absolute; inset: 16px; border:1px solid rgba(255,255,255,.12);
    border-radius: 18px; box-shadow: 0 30px 80px rgba(0,0,0,.45), inset 0 1px 0 rgba(255,255,255,.05);
    backdrop-filter: blur(6px) saturate(120%); background:#fff; overflow:hidden;
  }
  .simul .site-embed{ width:100%; height:100%; border:0; display:block; background:#fff; }

  /* NFC 카드(원본 350x680 ≈ 35:68)는 오른쪽에 고정 배치 */
  .simul .nfc{
    position:absolute; right: 120px; top: 150px; width: 350px; height: 680px;
    border-radius: 30px; box-shadow: 0 20px 60px rgba(0,0,0,.12); background:#fff; overflow:hidden;
  }
  .simul .nfc.working{
    background: linear-gradient(135deg, #91a5ffe8 0%, #cfa0ffea 100%);
  }
  .simul .nfc img{
    position:absolute; width: 50%; height: 50%; object-fit: contain;
    left:25%; top:25%; user-select:none; cursor:grab;
  }

  /* ====== Lastment (텍스트만) ====== */
  .last{
    background:#fff;
  }
  .last .title{
    position:absolute; left: 0; right:0; top: 180px; text-align:center;
    font-size: 48px; font-weight: 900; color:#2c3e50;
    opacity:0; transform: scale(.9); transition: opacity .8s ease, transform .8s ease;
  }
  .last .title.show{ opacity:1; transform: scale(1); }
  .last .highlight{ color:#7e5eba; display:inline-block; animation: pulseText 2s ease-in-out infinite; }
  @keyframes pulseText{ 0%,100%{transform:scale(1)} 50%{transform:scale(1.03)} }

  /* 섹션 간 여백: 프레임 아래로 여백을 추가해 스크롤 여지 확보 */
  .spacer{ height: calc(80px * var(--scale)); }
</style>
</head>
<body>

  <!-- Header (비율 스케일 적용) -->
  <header>
    <div class="header-inner">
      <div class="brand">
        <img src="../images/KhealthticketLogo.png" alt="로고">
        K-Health Ticket
      </div>
      <nav>
        <ul>
          <li><a href="../index.html">홈</a></li>
          <li><a href="#hello">서비스</a></li>
          <li><a href="#flow">이용방법</a></li>
          <li><a href="#simul">다운로드</a></li>
          <li><a href="#contact">문의</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <!-- Hello -->
  <section id="hello" class="section hello">
    <div class="frame">
      <div class="frame-inner">
        <div class="title">
          <h1><span style="color:#fff;font-weight:900">K-Health Ticket</span>,<br>공항에서도 3초만에 인증하세요!</h1>
          <div class="subtitle">
            블록체인 기술 의료티켓으로 안전하고 간편하게 활용하세요.<br>
            출국·입국 시 병원 방문 없이 건강 정보를 제출하고 검증할 수 있습니다.<br>
            위·변조 걱정 없이 국제적으로 신뢰받는 디지털 진료 증명서를 제공합니다.<br>
            빠른 절차로 여행과 업무에 더 많은 시간을 확보하세요.
          </div>
        </div>
        <div class="airport">
          <img src="../images/airportLogo.png" alt="공항 로고">
        </div>
      </div>
    </div>
    <div class="spacer"></div>
  </section>

  <!-- NFT Flow -->
  <section id="flow" class="section flow">
    <div class="frame">
      <div class="frame-inner">
        <div class="title" id="flowTitle">
          <span style="color:#7e5eba">K-Health ticket</span> 공항 Simulation
          <h6>다음 절차를 따라해 보세요!</h6>
        </div>

        <div class="flow-box" id="flowBox" role="list" aria-label="NFT 처방전 검증 절차">
          <div class="step" role="listitem">NFT 처방전 검증 클릭</div>
          <span class="arrow" aria-hidden="true">›</span>
          <div class="step" role="listitem">NFC 태그 클릭</div>
          <span class="arrow" aria-hidden="true">›</span>
          <div class="step" role="listitem">휴대폰을 갖다 대세요</div>
          <span class="arrow" aria-hidden="true">›</span>
          <div class="step" role="listitem">스크롤하며 내역 확인</div>
        </div>
      </div>
    </div>
    <div class="spacer"></div>
  </section>

  <!-- Simulation -->
  <section id="simul" class="section simul">
    <div class="frame">
      <div class="frame-inner">
        <div class="desktop">
          <div class="window">
            <iframe class="site-embed" src="./a.html" title="웹 미리보기" loading="lazy"></iframe>
          </div>
        </div>

        <div class="nfc" id="nfc">
          <img src="../images/NFC.png" alt="NFC">
        </div>
      </div>
    </div>
    <div class="spacer"></div>
  </section>

  <!-- Lastment -->
  <section class="section last" id="contact">
    <div class="frame">
      <div class="frame-inner">
        <div class="title" id="lastTitle">
          <span class="highlight">K-Health ticket</span>&nbsp;&nbsp;은<br>
          기존과 다른<br>
          의료 생태계를<br>
          만들고 있습니다.<br>
        </div>
      </div>
    </div>
    <div class="spacer"></div>
  </section>

<script>
  /* ====== 1) Scale 계산: 뷰포트 폭 기준으로 비율 유지 ======
     - 디자인 폭 1440px 기준으로 축소/확대
     - 필요 시 높이 제약까지 고려하려면 min(가로스케일, 세로스케일) 사용 가능
  */
  function computeScale(){
    const designW = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--design-w')) || 1440;
    const vw = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);
    // 세로까지 강제하려면 아래 두 줄 활성화:
    // const designH = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--design-h')) || 900;
    // const vh = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);

    let s = vw / designW;
    // 세로 비율까지 엄격히 맞추려면:
    // s = Math.min(vw / designW, vh / designH);

    // 너무 크게 확대하지 않게(원본 이상 확대 방지하고 싶으면 1로 캡)
    s = Math.min(s, 1);
    document.documentElement.style.setProperty('--scale', s.toString());
  }
  computeScale();
  window.addEventListener('resize', computeScale);

  /* ====== 2) 관찰자: 타이틀/플로우 애니메이션 ====== */
  const ioTitle = new IntersectionObserver((entries)=>{
    entries.forEach(e=>{
      const el = e.target;
      if(el.id === 'flowTitle') el.classList.toggle('show', e.isIntersecting);
      if(el.id === 'lastTitle') el.classList.toggle('show', e.isIntersecting);
    });
  }, {threshold: .3});
  const flowTitle = document.getElementById('flowTitle');
  const lastTitle = document.getElementById('lastTitle');
  flowTitle && ioTitle.observe(flowTitle);
  lastTitle && ioTitle.observe(lastTitle);

  const flowBox = document.getElementById('flowBox');
  if(flowBox){
    const ioFlow = new IntersectionObserver((entries)=>{
      entries.forEach(e=>{
        const frame = flowBox.closest('.frame')?.parentElement; // section
        if(!frame) return;
        const sec = frame.parentElement;
        if(e.isIntersecting){
          sec.classList.remove('animate-back');
          sec.classList.add('animate');
          setTimeout(()=>{ sec.classList.remove('animate'); sec.classList.add('animate-back'); }, 800);
        }else{
          sec.classList.remove('animate','animate-back');
        }
      });
    }, {threshold:.4});
    ioFlow.observe(flowBox);
  }

  /* ====== 3) 드래그 가능한 NFC 이미지 ====== */
  (function(){
    const wrap = document.getElementById('nfc');
    const img = wrap?.querySelector('img');
    if(!wrap || !img) return;

    // 중심 배치
    function center(){
      const w = wrap.clientWidth, h = wrap.clientHeight;
      const iw = img.clientWidth, ih = img.clientHeight;
      img.style.left = ((w - iw)/2) + 'px';
      img.style.top  = ((h - ih)/2) + 'px';
    }
    img.style.position = 'absolute';
    img.style.cursor = 'grab';
    if(img.complete) center(); else img.addEventListener('load', center);

    let sx=0,sy=0,ox=0,oy=0,drag=false;
    img.addEventListener('mousedown', (e)=>{
      drag = true; img.style.cursor='grabbing';
      sx = e.clientX; sy = e.clientY;
      ox = parseFloat(img.style.left)||0; oy = parseFloat(img.style.top)||0;
      e.preventDefault();
    });
    window.addEventListener('mousemove', (e)=>{
      if(!drag) return;
      const w = wrap.clientWidth, h = wrap.clientHeight;
      const iw = img.clientWidth, ih = img.clientHeight;
      let nx = ox + (e.clientX - sx);
      let ny = oy + (e.clientY - sy);
      nx = Math.max(0, Math.min(nx, w - iw));
      ny = Math.max(0, Math.min(ny, h - ih));
      img.style.left = nx + 'px';
      img.style.top  = ny + 'px';
      wrap.classList.toggle('working', nx <= 0);
    });
    window.addEventListener('mouseup', ()=>{
      drag=false; img.style.cursor='grab';
    });
  })();
</script>
</body>
</html>
